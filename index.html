<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>AthLog</title>
  <link rel="manifest" href="./manifest.webmanifest?v=2">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32.png">
  <link rel="apple-touch-icon" href="./apple-touch-icon-180.png">
  <link rel="stylesheet" href="style.css" />
  <link rel="preload" href="human.webp" as="image" imagesrcset="human.webp" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div id="app" class="app hidden">
    <header class="topbar">
      <button class="ghost hidden" id="goHomeBtn" style="font-weight:bold; margin-right:8px;">🏠</button>
      
      <button class="ghost" id="openHelpBtn">ヘルプ</button>
      <div class="brand">AthLog</div>
      <div class="teamuser" style="display:flex; align-items:center; gap:12px;">
  <span>Team: <b id="teamLabel"></b></span>  <span id="memberNavWrap" style="display:flex; align-items:center; gap:4px;">
    </span>
  <div id="teamSwitchWrap" class="team-switch" style="display:flex; align-items:center; gap:8px;">
    </div>
  <button id="logoutBtn" class="ghost">ログアウト</button>
</div>

<div class="teamuser" style="display:flex; align-items:center; gap:12px;">
  <div id="teamSwitchWrap" class="team-switch" style="display:flex; align-items:center; gap:8px;">
    <select id="teamSwitchSelect" class="ghost" style="padding:4px 6px;"></select>
    <button id="addTeamBtn" class="ghost">＋</button>
    <button id="setAsMainBtn" class="ghost">★</button>
  </div>

  <span id="memberNavWrap" style="display:flex; align-items:center; gap:4px;">
    <button id="memberPrev" class="ghost small-btn">&lt;</button>
    <span style="display:flex; align-items:center; gap:8px;">
      <span id="mainTeamBadge" class="badge primary hidden">MAIN</span>
      <span id="readonlyBadge" class="badge warn hidden">閲覧のみ</span>
    </span>
    <select id="memberSelect" class="ghost" style="padding: 4px 6px;"></select>
    <button id="memberNext" class="ghost small-btn">&gt;</button>
  </span>

  <button id="logoutBtn" class="ghost">ログアウト</button>
</div>
    </header>

    <nav class="tabs hidden" id="journalTabs">
      <button data-tab="journal" class="tab active">日誌</button>
      <button data-tab="month" class="tab">一覧</button>
      <button data-tab="dashboard" class="tab">グラフ</button>
    </nav>
    <div id="globalSwipeBar" aria-hidden="true"></div>

    <section id="home" class="tabpanel active">
      <div class="home-container">
        <h2 style="text-align:center; margin-bottom:20px; color:var(--text);">メニュー選択</h2>
        <div class="home-grid" id="homeMenuGrid">
          <button class="home-card" data-target="journal">
            <div class="home-icon">📓</div>
            <div class="home-label">日誌</div>
            <div class="home-desc">毎日の記録・一覧・グラフ</div>
          </button>
          <button class="home-card" data-target="plans">
            <div class="home-icon">📅</div>
            <div class="home-label">予定</div>
            <div class="home-desc">練習計画の確認・編集</div>
          </button>
          <button class="home-card" data-target="memo">
            <div class="home-icon">💬</div>
            <div class="home-label">メモ</div>
            <div class="home-desc">チーム内共有メモ</div>
          </button>
          <button class="home-card" data-target="ai_coach">
            <div class="home-icon">🤖</div>
            <div class="home-label">AIコーチ</div>
            <div class="home-desc">練習データの分析・助言</div>
          </button>
          <button class="home-card" data-target="notify">
            <div class="home-icon">🔔</div>
            <div class="home-label">通知</div>
            <div class="home-desc">新着コメント・お知らせ</div>
          </button>
          <button class="home-card" data-target="clock">
            <div class="home-icon">⏱</div>
            <div class="home-label">時計</div>
            <div class="home-desc">ストップウォッチ・タイマー</div>
          </button>
          <button class="home-card" data-target="stadium">
            <div class="home-icon">🏟</div>
            <div class="home-label">競技場</div>
            <div class="home-desc">競技場マップ・予定</div>
          </button>
        </div>
      </div>
    </section>

    <section id="journal" class="tabpanel">
        <div class="journal-grid">
            <div class="panel">
                <div class="muscle-header">
                <h3>筋疲労</h3>
                <div class="palette">
                    <button class="lvl active" data-lvl="1"><span class="dot dot1"></span>1</button>
                    <button class="lvl" data-lvl="2"><span class="dot dot2"></span>2</button>
                    <button class="lvl" data-lvl="3"><span class="dot dot3"></span>3</button>
                    <button id="eraser" class="lvl">🧼</button>
                </div>
                </div>
                <div id="mmWrap">
                <img id="mmBg" src="./human.webp" alt="" style="display:block;width:100%;height:auto;pointer-events:none;">
                <canvas id="mmBase"></canvas>
                <canvas id="mmBarrier"></canvas>
                <canvas id="mmOverlay"></canvas>
                </div>
            </div>

            <div class="panel right">
              <div class="weekbar">
                <button id="weekPrev" class="ghost">&larr;</button>
                <div id="weekChips" class="chips"></div>
                <button id="weekNext" class="ghost">&rarr;</button>
                <input type="date" id="datePicker" />
                <button id="gotoToday" class="ghost">今日</button>
                <button id="shareModeBtn" class="ghost">📷</button>
                <button id="favBtn" class="ghost" style="font-size:1.4rem; color:#ccc; line-height:1;">☆</button>
              </div>

                <div class="quick" style="justify-content:center;">
                <button class="qbtn jog">ジョグ</button>
                <button class="qbtn point">ポイント</button>
                <button class="qbtn sup">補強</button>
                <button class="qbtn off">オフ</button>
                <button class="qbtn other">その他</button>
                </div>

                <div class="formcol">
                <div style="display:flex; flex-wrap:wrap; gap:8px; align-items:flex-end;">
                    <div style="width: 70px;">
                    <label>距離(km)</label>
                    <input type="number" id="distInput" step="0.1" min="0" />
                    </div>
                   <div style="width: 70px;">
                     <label>体重(kg)</label>
                     <input type="number" id="weightInput" step="0.1" min="0" />
                   </div>
                   <div style="width: 70px;">
                     <label>睡眠(h)</label>
                     <input type="number" id="j-sleep" step="0.1" min="0" />
                   </div>
                   <div style="flex:1; min-width:150px;">
                    <label>調子</label>
                    <div id="conditionBtns" class="condition-rating">
                        <button data-val="1">1</button>
                        <button data-val="2">2</button>
                        <button data-val="3">3</button>
                        <button data-val="4">4</button>
                        <button data-val="5">5</button>
                    </div>
                    </div>
                </div>
                <div class="note">
                    <label>練習内容</label>
                    <textarea id="trainInput" rows="3"></textarea>
                    <div class="merge">
                    <select id="mergeScope" class="ghost"></select>
                    <input id="mergeTagFilter" class="ghost" placeholder="タグ" />
                    <button id="mergeBtn" class="ghost">反映</button>
                    </div>
                </div>
                <div class="note">
                    <label>タイム・感想</label>
                    <textarea id="feelInput" rows="6"></textarea>
                </div>
                <div class="savebar">
                    <div id="distanceSummary" class="muted">...</div>
                </div>
                <div class="note" id="teamSharedCommentBox">
                    <label>コメント</label>
                    <textarea id="teamSharedComment" rows="2" placeholder="共有コメント..."></textarea>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:4px;">
                    <div id="teamSharedCommentStatus" class="muted"></div>
                    <button id="tscSendBtn" class="primary">送信</button>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </section>

    <section id="month" class="tabpanel">
      <div class="monthbar">
        <button id="mPrev" class="ghost">&larr;</button>
        <input type="month" id="monthPick" />
        <button id="mNext" class="ghost">&rarr;</button>
        <button id="monthFavFilterBtn" class="ghost" style="color:#ccc; border:1px solid #eee; font-size:12px; margin-left:8px;">★のみ</button>
  
        <div style="display:flex; margin-left:8px; border:1px solid #ddd; border-radius:4px; overflow:hidden;">
          <input type="text" id="monthSearchInput" placeholder="内容検索" style="border:none; padding:4px; font-size:12px; width:100px; outline:none;">
          <button id="monthSearchBtn" style="border:none; background:#eee; padding:0 8px; cursor:pointer;">🔍</button>
        </div>
        <div id="monthSum" class="muted"></div>
      </div>
      <div class="panel" style="margin-bottom:12px;">
        <label for="monthGoalInput"><strong>月間目標</strong></label>
        <textarea id="monthGoalInput" class="form-control" rows="2"></textarea>
      </div>
      <div id="monthList" class="list"></div>
    </section>

    <section id="plans" class="tabpanel">
      <div class="monthbar">
        <button id="pPrev" class="ghost">&larr;</button>
        <input type="month" id="planMonthPick" />
        <button id="pNext" class="ghost">&rarr;</button>
        <div class="filters" style="margin-left:auto;">
          <select id="planScope" class="ghost"></select>
        </div>
      </div>
      <div class="panel" id="planAdvanced" style="display:none; gap:8px; align-items:center;">
        <label>種別</label>
        <select id="pointSubtype"><option value="pace">ペース走</option><option value="interval">インターバル</option></select>
        <label>距離</label>
        <input id="pointDistance" type="number" step="50" placeholder="1000" />
      </div>
      <div id="planList" class="list" style="margin-top:10px;"></div>
    </section>

    <section id="dashboard" class="tabpanel">
      <div class="panel" style="margin-bottom:12px;">
        <div class="card">
          <h3>
            <button id="distDayPrev" class="ghost">&larr;</button>
            <span id="distChartTitleDay">日別</span>
            <button id="distDayNext" class="ghost">&rarr;</button>
          </h3>
          <canvas id="distanceChartDay" height="180"></canvas>
        </div>
        <div class="card" style="margin-top:10px;">
          <h3>
            <button id="distWeekPrev" class="ghost">&larr;</button>
            <span id="distChartTitleWeek">週間</span>
            <button id="distWeekNext" class="ghost">&rarr;</button>
          </h3>
          <canvas id="distanceChartWeek" height="180"></canvas>
        </div>
        <div class="card" style="margin-top:10px;">
          <h3>
            <button id="distMonthPrev" class="ghost">&larr;</button>
            <span id="distChartTitleMonth">月間</span>
            <button id="distMonthNext" class="ghost">&rarr;</button>
          </h3>
          <canvas id="distanceChartMonth" height="180"></canvas>
        </div>
      </div>
      <div class="panel">
        <div class="dash-header">
          <h3>コンディション</h3>
          <div class="dash-controls">
            <button id="condChartPrev" class="ghost">&larr;</button>
            <span id="condChartRange" class="muted"></span>
            <button id="condChartNext" class="ghost">&rarr;</button>
          </div>
        </div>
        <div style="height:250px;"><canvas id="conditionChart"></canvas></div>
      </div>
      <div class="panel" style="margin-top:12px;">
        <div class="dash-header">
          <h3>体重</h3>
          <div class="dash-controls">
            <button id="weightModeBtn" class="ghost">日</button>
            <button id="weightPrev" class="ghost">&larr;</button>
            <span id="weightRangeLabel" class="muted"></span>
            <button id="weightNext" class="ghost">&rarr;</button>
          </div>
        </div>
        <div style="height:200px;"><canvas id="weightChart"></canvas></div>
      </div>
      <div class="panel" style="margin-top:12px;">
        <h3 id="typePieTitle">練習割合</h3>
        <div style="height:220px; position:relative;"><canvas id="typePieChart"></canvas></div>
      </div>
    </section>

    <section id="ai_coach" class="tabpanel">
      <div class="panel">
        <h3>AI専属コーチ</h3>
        <details style="margin-bottom: 15px; border: 1px solid var(--line); padding: 10px; border-radius: 8px; background:var(--bg);">
          <summary style="cursor: pointer; font-weight: bold;">⚙️ プロフィール設定</summary>
          <div style="margin-top: 10px; display:flex; flex-direction:column; gap:8px;">
            <div>
              <label>専門種目</label>
              <input type="text" id="aiSpecialty" placeholder="例: 5000m">
            </div>
            <div>
              <label>目標タイム (SB)</label>
              <input type="text" id="aiSb" placeholder="例: 15分30秒">
            </div>
            <div>
              <label>申し送り事項 (怪我・体調など)</label>
              <textarea id="aiNote" style="height: 60px;" placeholder="例: 右膝に違和感あり"></textarea>
            </div>
            <button id="saveAiProfileBtn" onclick="saveAiProfile()" class="ghost" style="align-self:flex-start;">設定を保存</button>
          </div>
        </details>

        <div id="aiConfig" style="margin-bottom:10px;">
          <label style="font-size:10px; color:var(--muted);">Gemini API Key</label>
          <input type="password" id="geminiApiKey" placeholder="APIキーを入力" class="form-control" style="font-size:12px; margin-top:4px;" />
        </div>

        <div class="chat-container">
          <div id="aiChatLog" class="chatlog" style="min-height:300px; max-height:500px; background:var(--bg); border:1px solid var(--line); border-radius:8px; padding:10px;">
            <div class="msg system">
              <span class="txt">こんにちは！AIコーチです。<br>「分析開始」を押すと、直近7日間のデータを読み込んでアドバイスします。</span>
            </div>
          </div>
          <div class="chat-input-area" style="margin-top:10px;">
            <button id="runAiBtn" class="primary" style="white-space:nowrap;">📊 分析開始</button>
            <input id="aiChatInput" class="form-control" placeholder="質問を入力..." />
            <button id="aiSendBtn" class="ghost">送信</button>
          </div>
        </div>
      </div>
    </section>

    <section id="memo" class="tabpanel">
      <div class="panel">
        <h3>チームメモ</h3>
        <div id="memoChatBox" class="chat">
          <div id="memoChatLog" class="chatlog" style="max-height:400px;"></div>
          <div class="chat-input-area">
            <input id="memoChatInput" class="form-control" placeholder="メッセージ..." />
            <button id="memoSendBtn" class="primary">送信</button>
          </div>
        </div>
      </div>
    </section>

    <section id="notify" class="tabpanel">
      <div class="panel">
        <h3>通知</h3>
        <div id="notifyList" class="chatlog"></div>
        <div class="muted" id="notifyEmpty" style="display:none; padding:12px 0;">なし</div>
      </div>
    </section>
    <section id="home" class="tabpanel active">
       <button class="home-card" data-target="clock">
            <div class="home-icon">⏱</div>
            <div class="home-label">時計</div>
            <div class="home-desc">timer (多機能タイマー)</div>
          </button>
       </section>

    <section id="clock" class="tabpanel" style="height: calc(100vh - 60px); display: none;"> <div id="ltimer-app" class="lt-h-full">
        <div id="lt-back" class="lt-back-btn lt-hidden">
          <button aria-label="戻る">←</button>
        </div>

        <div id="lt-menu" class="lt-screen lt-justify-center lt-items-center lt-p-4">
          <h2 class="lt-text-2xl lt-font-bold" style="margin-bottom: 20px;">timer Menu</h2>
          
          <div class="lt-w-full" style="max-width: 320px; background: white; padding: 16px; border-radius: 12px; border: 1px solid #eee; margin-bottom: 24px;">
            <p class="lt-text-sm lt-text-gray-500 lt-text-center" style="margin-bottom:8px;">2人で使う場合は合言葉を入力</p>
            <div class="lt-flex lt-gap-2">
              <input id="share-passcode" type="text" placeholder="合言葉" class="lt-input">
              <button id="share-connect-btn" class="lt-bg-blue-500 lt-text-white lt-font-bold lt-rounded-lg" style="padding: 0 16px; white-space: nowrap;">接続</button>
            </div>
            <div id="share-status-msg" class="lt-text-sm lt-text-center lt-font-bold" style="margin-top: 8px; color: var(--primary);"></div>
          </div>

          <div class="lt-w-full" style="max-width: 320px; display: flex; flex-direction: column; gap: 12px;">
            <div class="lt-grid-cols-3 lt-gap-2">
              <button id="choose-split" class="lt-col-span-2 lt-p-4 lt-text-xl lt-font-bold lt-text-white lt-bg-indigo-600 lt-rounded-xl lt-shadow">ペース走</button>
              <button id="help-split" class="lt-p-2 lt-text-sm lt-font-bold lt-text-indigo-700 lt-bg-indigo-50 lt-rounded-xl lt-border">説明</button>
            </div>
            <div class="lt-grid-cols-3 lt-gap-2">
              <button id="choose-pm" class="lt-col-span-2 lt-p-4 lt-text-xl lt-font-bold lt-text-white lt-bg-green-600 lt-rounded-xl lt-shadow">インターバル</button>
              <button id="help-pm" class="lt-p-2 lt-text-sm lt-font-bold lt-text-green-700 lt-bg-green-50 lt-rounded-xl lt-border">説明</button>
            </div>
            <div class="lt-grid-cols-3 lt-gap-2">
              <button id="choose-custom" class="lt-col-span-2 lt-p-4 lt-text-xl lt-font-bold lt-text-white lt-bg-gray-800 lt-rounded-xl lt-shadow">タイマー</button>
              <button id="help-custom" class="lt-p-2 lt-text-sm lt-font-bold lt-text-gray-700 lt-bg-gray-100 lt-rounded-xl lt-border">説明</button>
            </div>
          </div>
        </div>

        <div id="lt-split" class="lt-screen lt-hidden">
          <div class="runner-wrap">
            <div id="split-grid" class="runner-grid"></div>
            <div id="split-master" class="split-master">
              <div id="share-controls" class="lt-hidden lt-w-full lt-flex lt-flex-col lt-items-center lt-text-sm">
                <div id="share-status-text" style="margin-bottom:4px;">接続中...</div>
                <div class="lt-w-full" style="display:grid; grid-template-columns:1fr 1fr; gap:8px;">
                  <button id="share-ready-btn-1" class="lt-p-2 lt-border lt-rounded-lg lt-bg-gray-200">User1</button>
                  <button id="share-ready-btn-2" class="lt-p-2 lt-border lt-rounded-lg lt-bg-gray-200">User2</button>
                </div>
              </div>
              <div id="standalone-controls" class="lt-flex lt-gap-2 lt-items-center lt-justify-center">
                  <button data-action="add" class="lt-bg-blue-500 lt-text-white lt-font-bold lt-rounded-xl" style="width:40px; height:40px; font-size:24px;">+</button>
                  <button data-action="remove" class="lt-bg-gray-500 lt-text-white lt-font-bold lt-rounded-xl" style="width:40px; height:40px; font-size:24px;">−</button>
                  <button data-action="start-all" class="lt-bg-green-500 lt-text-white lt-font-bold lt-rounded-lg" style="padding: 0 12px; height: 40px;">ALL START</button>
                  <button data-action="stop-all"  class="lt-bg-red-500 lt-text-white lt-font-bold lt-rounded-lg" style="padding: 0 12px; height: 40px;">STOP</button>
                  <button data-action="review-reset" class="lt-bg-orange-500 lt-text-white lt-font-bold lt-rounded-lg" style="padding: 0 12px; height: 40px;">結果</button>
              </div>
            </div>
          </div>
        </div>

        <div id="lt-pm" class="lt-screen lt-hidden">
          <div id="pm-settings" class="lt-p-4 lt-h-full" style="overflow-y:auto;">
            <h2 class="lt-text-xl lt-font-bold lt-text-center lt-p-4">インターバル設定</h2>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:8px; margin-bottom:12px;">
              <input id="pm-distance" type="number" placeholder="距離(m)/本" class="lt-input" value="1000">
              <input id="pm-lap-distance" type="number" placeholder="トラック1周(m)" value="400" class="lt-input">
              <input id="pm-reps" type="number" placeholder="本数" class="lt-input">
              <div style="display:flex; align-items:center;">
                <button id="pm-lane-minus" class="lt-p-2 lt-border lt-bg-gray-200">-</button>
                <span id="pm-lane-count" class="lt-p-2 lt-border" style="flex:1; text-align:center;">1レーン</span>
                <button id="pm-lane-plus" class="lt-p-2 lt-border lt-bg-gray-200">+</button>
              </div>
              <input id="pm-rest-dist" type="number" placeholder="レスト(m)" class="lt-input" style="grid-column: span 2;">
            </div>
            <div id="pm-lane-targets" style="display:flex; flex-direction:column; gap:8px;"></div>
            <button id="pm-start-btn" class="lt-w-full lt-bg-green-500 lt-text-white lt-font-bold lt-rounded-lg lt-shadow" style="padding:12px; margin-top:16px;">練習開始</button>
          </div>
          <div id="pm-runner" class="lt-hidden runner-wrap">
              <div id="pm-info-bar" class="lt-bg-gray-800 lt-text-white lt-text-center lt-p-2 lt-font-bold"></div>
              <div id="pm-runner-grid" class="pm-grid"></div>
          </div>
        </div>

        <div id="lt-custom" class="lt-screen lt-hidden">
          <div id="custom-settings" class="lt-p-4">
            <h2 class="lt-text-xl lt-font-bold lt-text-center lt-p-4">タイマー設定</h2>
            <div id="custom-steps-container" style="display:flex; flex-direction:column; gap:8px;"></div>
            <button id="custom-add-step-btn" class="lt-w-full lt-text-indigo-700 lt-border lt-rounded-lg lt-font-bold" style="padding:8px; margin-top:16px;">ステップ追加</button>
            <div style="margin-top:16px;">
              <label class="lt-font-bold">セット数</label>
              <input id="custom-reps" type="number" value="1" class="lt-input">
            </div>
            <button id="custom-start-btn" class="lt-w-full lt-bg-green-500 lt-text-white lt-font-bold lt-rounded-lg lt-shadow" style="padding:12px; margin-top:16px;">START</button>
          </div>
          <div id="custom-runner" class="lt-hidden custom-runner">
            <div>
              <div id="custom-runner-set-info" class="lt-text-2xl lt-font-bold"></div>
              <div id="custom-runner-step-info" class="lt-text-xl"></div>
            </div>
            <div id="custom-runner-time" style="font-size: 80px; font-weight:800;">00:00</div>
            <div class="lt-w-full"><button id="custom-reset-btn" class="lt-w-full lt-bg-gray-200 lt-text-gray-700 lt-font-bold lt-rounded-lg" style="padding:12px;">RESET</button></div>
          </div>
        </div>

        <div id="lt-summary" class="lt-modal lt-hidden">
          <div class="lt-modal-content">
            <h2 class="lt-text-2xl lt-font-bold lt-text-center">結果</h2>
            <div id="summary-table"></div>
            <button id="summary-close" class="lt-w-full lt-bg-gray-200 lt-text-gray-700 lt-font-bold lt-rounded-lg lt-p-2">閉じる</button>
          </div>
        </div>
        <div id="lt-help" class="lt-modal lt-hidden">
          <div class="lt-modal-content">
            <div class="lt-flex lt-justify-between lt-items-center">
              <h2 id="help-title" class="lt-text-xl lt-font-bold"></h2>
              <button id="help-close" class="lt-bg-gray-200 lt-rounded lt-p-2">閉じる</button>
            </div>
            <div id="help-body" class="lt-text-sm" style="margin-top:12px; line-height:1.5;"></div>
          </div>
        </div>
      </div>
    </section>
  <section id="home" class="tabpanel active">
       <button class="home-card" data-target="stadium">
            <div class="home-icon">🏟</div>
            <div class="home-label">競技場</div>
            <div class="home-desc">全国の陸上競技場マップ</div>
          </button>
       </section>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <section id="stadium" class="tabpanel" style="position:relative; height:calc(100vh - 60px); overflow:hidden;">
      <div id="std-map" style="width:100%; height:100%; z-index:1;"></div>
      
      <div style="position:absolute; bottom:20px; right:20px; z-index:1000; display:flex; flex-direction:column; gap:10px;">
        <button id="std-geo-btn" class="primary" style="border-radius:50%; width:50px; height:50px; font-size:24px; box-shadow:0 4px 6px rgba(0,0,0,0.2);">📍</button>
      </div>
      
      <div style="position:absolute; top:10px; left:10px; right:10px; z-index:1000; display:flex; flex-direction:column; gap:8px;">
        <div style="background:rgba(255,255,255,0.9); border-radius:8px; padding:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); display:flex; gap:8px;">
          <input id="std-search-input" class="form-control" placeholder="競技場を検索..." style="flex:1;">
        </div>
        
        <div id="std-region-overlay" style="overflow-x:auto; white-space:nowrap; padding-bottom:4px; -webkit-overflow-scrolling:touch;"></div>
      </div>
    </section>
  </div>

  <div id="login" class="login">
    <div class="login-card">
      <div class="logo">AthLog</div>
      <div class="desc">Login</div>
      <label>Team ID</label>
      <input id="teamId" />
      <label>Member</label>
      <input id="memberName" />
      <button id="loginBtn" class="primary wide">Enter</button>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA8oCOusnqZCSax9ZY3-n4KNt2AxEmvT-E",
      authDomain: "athlog-126d2.firebaseapp.com",
      projectId: "athlog-126d2",
      storageBucket: "athlog-126d2.appspot.com",
      messagingSenderId: "784178114661",
      appId: "1:784178114661:web:d41103b0dad1187b85168c"
    };
    if (!firebase.apps || !firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
  </script>
  <script src="app.js?v=20251221_home_fix" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js').catch(console.error); });
    }
  </script>
</body>
</html>















